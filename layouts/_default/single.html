{{ define "main" }}
<div class="container">
    <article class="article">
        {{ if .Params.toc }}
        <div class="lab-with-toc">
            <aside class="toc-sidebar">
                <div class="toc-box">
                    <h3>Table of Contents</h3>
                    {{ .TableOfContents }}
                </div>
            </aside>
            <div class="article-content">
                {{ .Content }}
            </div>
        </div>
        {{ else }}
        <div class="article-content">
            {{ .Content }}
        </div>
        {{ end }}
        
        <nav class="article-nav">
            {{- $pages := .CurrentSection.Pages.ByWeight -}}
            {{- $currentWeight := .Params.weight | default 0 -}}
            {{- $prev := false -}}
            {{- $next := false -}}
            {{- range $pages -}}
                {{- $w := .Params.weight | default 0 -}}
                {{- if eq $w (sub $currentWeight 1) -}}
                    {{- $prev = . -}}
                {{- end -}}
                {{- if eq $w (add $currentWeight 1) -}}
                    {{- $next = . -}}
                {{- end -}}
            {{- end -}}
            {{ if $prev }}
            <a href="{{ $prev.Permalink }}" class="nav-prev">← {{ $prev.Title }}</a>
            {{ else }}
            <span></span>
            {{ end }}
            {{ if $next }}
            <a href="{{ $next.Permalink }}" class="nav-next">{{ $next.Title }} →</a>
            {{ end }}
        </nav>
    </article>
</div>
{{ end }}